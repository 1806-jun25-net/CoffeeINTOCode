@model HappyPets.WebApp.Models.OrderDetailsRating

<!-- Main Content -->
<main class="row my-4">
    <div class="container-fluid">
        <h2>Order Number: <span style="color:red;">@Model.OrderId</span></h2>
        <p>Total: $<span>@Model.OrderTotal</span></p>
        <p>Order Issued: @Model.</p>
        @* TODO show if  user have a services*@
        @if (Model.ServicesItems.Count() > 0)
        {
        <p> Services Appointment: @Model.AppointmentDate</p>
        <p> Your Groomer: @Model.Employee_Firstname @Model.Employee_Lastname </p>
        <p> Your services Rating: <span> @Model.Rating </span> Starts <button id = "EditRating" type = "button"> edit </button ></p>
        }

        <form style="display:none" id="selectedRating" asp-controller="MyGrooming" asp-action="OrderDetailsRatings" method="post">
            <label>Rate your Employee</label>
            @Html.DropDownList("selectedRating",
                      new List<SelectListItem>
                      {
        new SelectListItem() { Text = "1", Value = "1"},
        new SelectListItem() { Text = "2", Value = "2"},
        new SelectListItem() { Text = "3", Value = "3"},
        new SelectListItem() { Text = "4", Value = "4"},
        new SelectListItem() { Text = "5", Value = "5" }
                          })
            <input hidden name="selectedEmplooye" value="" />
            <button id="SubmitRating" type="submit">Submit Rating</button>
        </form>

    </div>
    <div class="container-fluid my-4">
        <table class="table table-striped table-hover my-4">
            <thead>
                <tr>
                    <th scope="col">Description</th>
                    <th scope="col">Price</th>
                </tr>
            </thead>
            <tbody>

            @foreach (var s in Model.ServicesItems)
            {
            <tr>
            <td>@s.ServiceNames</td>
            <td>@s.ServicePrice</td>
            </tr>
            }

            @foreach (var s in Model.ProductsItems)
            {
            <tr>
            <td>@s.ProductNames</td>
            <td>@s.ProductPrice</td>
            </tr>
            }

            </tbody>
        </table>

        <p>Total: $<span>@Model.OrderTotal</span></p>
    </div>
</main>

<script>(function() {
        var showRating = document.getElementById("EditRating");
        var selectedRating = document.getElementById("selectedRating");
        var clicked = undefined;
        var SubmitRating = document.getElementById("SubmitRating");


        showRating.addEventListener("click", () => {
            if (clicked == undefined || clicked == true) {
                selectedRating.style.display = "";
                showRating.innerText = "hide";
                clicked = false;
            }
            else {
                selectedRating.style.display = "none";
                showRating.innerText = "Edit";
                clicked = true;
            }
        });

        SubmitRating.addEventListener("click", () => {
            selectedRating.style.display = "none";
            showRating.innerText = "Edit";
            clicked = true;
        })

})();</script>
